<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wil jij mijn Valentijn zijn? üíó</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe5f0 50%, #fff0f5 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            position: relative;
            transition: background 0.5s ease;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #1a0a14 0%, #2d1b2e 50%, #1f0d1f 100%);
        }

        body::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 182, 193, 0.3) 0%, transparent 70%);
            animation: glow 8s ease-in-out infinite;
            pointer-events: none;
        }

        body.dark-mode::before {
            background: radial-gradient(circle, rgba(255, 105, 180, 0.2) 0%, transparent 70%);
        }

        @keyframes glow {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        /* Floating Hearts Background */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 1;
        }

        .floating-heart {
            position: absolute;
            font-size: 20px;
            opacity: 0;
            animation: float-up 8s ease-in infinite;
        }

        @keyframes float-up {
            0% {
                opacity: 0;
                transform: translateY(100vh) rotate(0deg);
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) rotate(360deg);
            }
        }

        /* Dark Mode Toggle */
        .dark-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .dark-mode-toggle:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.5);
        }

        body.dark-mode .dark-mode-toggle {
            background: rgba(255, 255, 255, 0.1);
        }

        .container {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 20px;
            max-width: 600px;
            width: 100%;
        }

        .screen {
            display: none;
            animation: fadeIn 0.6s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Heart Button */
        .heart-button {
            cursor: pointer;
            transition: transform 0.3s ease, filter 0.3s ease;
            filter: drop-shadow(0 10px 30px rgba(255, 105, 180, 0.4));
        }

        .heart-button:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 15px 40px rgba(255, 105, 180, 0.6));
        }

        .heart-button:active {
            transform: scale(0.95);
        }

        .heart-text {
            font-size: 28px;
            font-weight: 600;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Question Screen */
        .question-text {
            font-size: 32px;
            color: #d63384;
            margin-bottom: 40px;
            font-weight: 600;
            line-height: 1.4;
            transition: color 0.3s ease;
        }

        body.dark-mode .question-text {
            color: #ff6b9d;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            position: relative;
        }

        .btn {
            padding: 18px 50px;
            font-size: 22px;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #ff6b9d 0%, #ffa5c8 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.4);
            min-width: 280px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 105, 180, 0.6);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-no {
            background: linear-gradient(135deg, #9e9e9e 0%, #bdbdbd 100%);
            position: absolute;
            transition: all 0.2s ease;
        }

        .btn-no:hover {
            box-shadow: 0 12px 35px rgba(158, 158, 158, 0.6);
        }

        /* Final Screen */
        .final-text {
            font-size: 48px;
            color: #d63384;
            margin-bottom: 30px;
            font-weight: 700;
            transition: color 0.3s ease;
        }

        body.dark-mode .final-text {
            color: #ff6b9d;
        }

        .photo-container {
            margin: 30px auto;
            max-width: 400px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(255, 105, 180, 0.4);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .photo-container:hover {
            transform: scale(1.02);
        }

        .photo-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        .photo-placeholder {
            background: linear-gradient(135deg, #ffe5f0 0%, #ffd5e5 100%);
            padding: 60px 40px;
            color: #d63384;
            font-size: 20px;
            font-weight: 500;
        }

        .love-message {
            margin-top: 20px;
            font-size: 18px;
            color: #d63384;
            font-style: italic;
            line-height: 1.6;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            transition: color 0.3s ease;
        }

        body.dark-mode .love-message {
            color: #ffb6c1;
        }

        .continue-btn {
            margin-top: 30px;
            background: linear-gradient(135deg, #9c27b0 0%, #ba68c8 100%);
        }

        /* Love Letter Screen */
        .love-letter {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(255, 105, 180, 0.3);
            max-width: 500px;
            margin: 0 auto;
            transition: background 0.3s ease;
        }

        body.dark-mode .love-letter {
            background: rgba(45, 27, 46, 0.9);
        }

        .love-letter h2 {
            color: #d63384;
            font-size: 32px;
            margin-bottom: 30px;
            transition: color 0.3s ease;
        }

        body.dark-mode .love-letter h2 {
            color: #ff6b9d;
        }

        .reason-item {
            text-align: left;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 182, 193, 0.2);
            border-radius: 10px;
            border-left: 4px solid #ff6b9d;
            opacity: 0;
            animation: slideIn 0.5s ease forwards;
            transition: background 0.3s ease;
        }

        body.dark-mode .reason-item {
            background: rgba(255, 105, 180, 0.1);
        }

        .reason-item:nth-child(2) { animation-delay: 0.2s; }
        .reason-item:nth-child(3) { animation-delay: 0.4s; }
        .reason-item:nth-child(4) { animation-delay: 0.6s; }
        .reason-item:nth-child(5) { animation-delay: 0.8s; }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .reason-icon {
            font-size: 24px;
            margin-right: 10px;
        }

        .reason-text {
            color: #5a2040;
            font-size: 16px;
            line-height: 1.6;
            transition: color 0.3s ease;
        }

        body.dark-mode .reason-text {
            color: #ffb6c1;
        }

        /* Fullscreen Modal */
        .fullscreen-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .fullscreen-modal.active {
            display: flex;
        }

        .fullscreen-modal img {
            max-width: 90%;
            max-height: 90vh;
            border-radius: 10px;
            box-shadow: 0 0 50px rgba(255, 105, 180, 0.5);
        }

        .close-fullscreen {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 40px;
            color: white;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.2);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-fullscreen:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Music Player */
        .music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(255, 105, 180, 0.3);
            display: none;
            transition: all 0.3s ease;
        }

        body.dark-mode .music-player {
            background: rgba(45, 27, 46, 0.9);
        }

        .music-player.active {
            display: block;
        }

        .music-control {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
            transition: transform 0.2s ease;
        }

        .music-control:hover {
            transform: scale(1.2);
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        @media (max-width: 600px) {
            .heart-text { font-size: 22px; }
            .question-text { font-size: 26px; }
            .btn { font-size: 18px; padding: 15px 40px; min-width: 240px; }
            .final-text { font-size: 36px; }
            .love-letter { padding: 25px; }
            .love-letter h2 { font-size: 26px; }
            .reason-text { font-size: 14px; }
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            body::before { animation: none; }
            .floating-heart { animation: none; }
        }
    </style>
</head>
<body>
    <!-- Dark Mode Toggle -->
    <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Wissel tussen dag/nacht modus">üåô</button>

    <!-- Floating Hearts Background -->
    <div class="floating-hearts" id="floatingHearts"></div>

    <!-- Confetti Canvas -->
    <canvas id="confetti"></canvas>

    <!-- Fullscreen Modal -->
    <div class="fullscreen-modal" id="fullscreenModal" onclick="closeFullscreen()">
        <span class="close-fullscreen">√ó</span>
        <img id="fullscreenImg" src="" alt="Wij samen">
    </div>

    <!-- Music Player -->
    <div class="music-player" id="musicPlayer">
        <button class="music-control" onclick="toggleMusic()" id="musicBtn">üîä</button>
    </div>

    <!-- Hidden Spotify Embed -->
    <iframe id="spotifyPlayer" style="display:none;" src="https://open.spotify.com/embed/track/0WAEGVylZjbe2mQ6Or6HxY?utm_source=generator" width="0" height="0" frameBorder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
    
    <div class="container">
        <!-- Screen 1: Heart Button -->
        <div class="screen active" id="screen1">
            <svg class="heart-button" id="heartBtn" width="300" height="300" viewBox="0 0 100 100" onclick="showQuestion()">
                <defs>
                    <linearGradient id="heartGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#ff6b9d;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#ff1744;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M50,85 C50,85 15,60 15,40 C15,25 25,20 32,20 C40,20 45,25 50,35 C55,25 60,20 68,20 C75,20 85,25 85,40 C85,60 50,85 50,85 Z" 
                      fill="url(#heartGradient)" stroke="none"/>
                <text x="50" y="50" text-anchor="middle" class="heart-text" dy=".3em">klik hier</text>
            </svg>
        </div>

        <!-- Screen 2: Question -->
        <div class="screen" id="screen2">
            <div class="question-text">
                Lieve Carola, wil jij mijn valentijn zijn? üíó
            </div>
            <div class="button-group">
                <button class="btn" onclick="showFinal()">ja</button>
                <button class="btn" onclick="showFinal()">ja natuurlijk</button>
                <button class="btn btn-no" id="noBtn" onclick="moveNoButton()" style="display: none;">nee</button>
            </div>
        </div>

        <!-- Screen 3: Final with Photo -->
        <div class="screen" id="screen3">
            <div class="final-text">jeeeee</div>
            <div class="photo-container" id="photoContainer" onclick="openFullscreen()">
                <img id="photo" src="onspic.jpg" alt="Wij samen" onerror="showPlaceholder()">
            </div>
            <div class="love-message">
                "Elke dag met jou maakt het leven een stukje leuker üíó"
            </div>
            <button class="btn continue-btn" onclick="showLoveLetter()">Lees waarom ik van je houd üíå</button>
        </div>

        <!-- Screen 4: Love Letter -->
        <div class="screen" id="screen4">
            <div class="love-letter">
                <h2>Waarom ik van jou houd üíó</h2>
                <div class="reason-item">
                    <span class="reason-icon">üåü</span>
                    <span class="reason-text">Omdat je mij altijd ondersteunt en helpt om een betere versie van mezelf te worden</span>
                </div>
                <div class="reason-item">
                    <span class="reason-icon">üíù</span>
                    <span class="reason-text">Omdat je nooit moeilijk doet als ik iets wil wat jij niet leuk vindt</span>
                </div>
                <div class="reason-item">
                    <span class="reason-icon">üè°</span>
                    <span class="reason-text">Omdat jij als thuis komen voelt</span>
                </div>
                <div class="reason-item">
                    <span class="reason-icon">‚ú®</span>
                    <span class="reason-text">Omdat je prachtig bent</span>
                </div>
                <button class="btn" onclick="backToPhoto()" style="margin-top: 30px;">Terug naar onze foto üíï</button>
            </div>
        </div>
    </div>

    <script>
        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        let noButtonClicks = 0;
        let musicPlaying = false;

        // Initialize floating hearts
        function createFloatingHearts() {
            if (prefersReducedMotion) return;
            
            const container = document.getElementById('floatingHearts');
            const heartEmojis = ['üíó', 'üíï', 'üíñ', 'üíù', 'üíì'];
            
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 4 + 6) + 's';
                heart.style.fontSize = (Math.random() * 15 + 15) + 'px';
                
                container.appendChild(heart);
                
                setTimeout(() => heart.remove(), 8000);
            }, 800);
        }

        createFloatingHearts();

        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const btn = document.querySelector('.dark-mode-toggle');
            btn.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
        }

        // Screen transitions
        function showQuestion() {
            document.getElementById('screen1').classList.remove('active');
            document.getElementById('screen2').classList.add('active');
            
            // Show "nee" button after a delay for fun
            setTimeout(() => {
                document.getElementById('noBtn').style.display = 'block';
            }, 2000);
        }

        function showFinal() {
            document.getElementById('screen2').classList.remove('active');
            document.getElementById('screen3').classList.add('active');
            
            // Start music
            document.getElementById('musicPlayer').classList.add('active');
            
            if (!prefersReducedMotion) {
                setTimeout(() => startConfetti(), 200);
            }
        }

        function showLoveLetter() {
            document.getElementById('screen3').classList.remove('active');
            document.getElementById('screen4').classList.add('active');
        }

        function backToPhoto() {
            document.getElementById('screen4').classList.remove('active');
            document.getElementById('screen3').classList.add('active');
        }

        // Funny "no" button that runs away
        function moveNoButton() {
            noButtonClicks++;
            const btn = document.getElementById('noBtn');
            const container = document.querySelector('.button-group');
            
            if (noButtonClicks === 1) {
                btn.textContent = 'echt niet?';
            } else if (noButtonClicks === 2) {
                btn.textContent = 'weet je het zeker?';
            } else if (noButtonClicks >= 3) {
                btn.textContent = 'ok√© ok√©... ja dan! üíó';
                setTimeout(() => showFinal(), 500);
                return;
            }
            
            // Random position
            const maxX = container.offsetWidth - btn.offsetWidth - 40;
            const maxY = 200;
            const randomX = Math.random() * maxX - maxX/2;
            const randomY = Math.random() * maxY - 100;
            
            btn.style.transform = `translate(${randomX}px, ${randomY}px)`;
        }

        // Photo placeholder
        function showPlaceholder() {
            const container = document.getElementById('photoContainer');
            container.innerHTML = '<div class="photo-placeholder">Foto komt hier</div>';
        }

        // Fullscreen photo
        function openFullscreen() {
            const modal = document.getElementById('fullscreenModal');
            const img = document.getElementById('fullscreenImg');
            const photo = document.getElementById('photo');
            
            if (photo && photo.src) {
                img.src = photo.src;
                modal.classList.add('active');
            }
        }

        function closeFullscreen() {
            document.getElementById('fullscreenModal').classList.remove('active');
        }

        // Music controls
        function toggleMusic() {
            const player = document.getElementById('spotifyPlayer');
            const btn = document.getElementById('musicBtn');
            
            // Note: Spotify embed autoplay is limited by browser policies
            // User may need to interact with the page first
            if (!musicPlaying) {
                player.style.display = 'block';
                btn.textContent = 'üîä';
                musicPlaying = true;
            } else {
                player.style.display = 'none';
                btn.textContent = 'üîá';
                musicPlaying = false;
            }
        }

        // Confetti Animation with Hearts
        function startConfetti() {
            const canvas = document.getElementById('confetti');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            const colors = ['#ff6b9d', '#ffa5c8', '#ff1744', '#ffb6c1', '#ff69b4'];
            const particleCount = 100;

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = -10;
                    this.size = Math.random() * 12 + 8;
                    this.speedY = Math.random() * 3 + 2;
                    this.speedX = Math.random() * 2 - 1;
                    this.color = colors[Math.floor(Math.random() * colors.length)];
                    this.rotation = Math.random() * 360;
                    this.rotationSpeed = Math.random() * 10 - 5;
                    this.isHeart = Math.random() > 0.5;
                }

                update() {
                    this.y += this.speedY;
                    this.x += this.speedX;
                    this.rotation += this.rotationSpeed;
                }

                draw() {
                    ctx.save();
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.rotation * Math.PI / 180);
                    
                    if (this.isHeart) {
                        // Draw heart shape
                        ctx.fillStyle = this.color;
                        ctx.beginPath();
                        const size = this.size / 2;
                        ctx.moveTo(0, size);
                        ctx.bezierCurveTo(-size, 0, -size * 1.5, -size * 0.5, 0, -size * 1.5);
                        ctx.bezierCurveTo(size * 1.5, -size * 0.5, size, 0, 0, size);
                        ctx.fill();
                    } else {
                        // Draw square
                        ctx.fillStyle = this.color;
                        ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
                    }
                    
                    ctx.restore();
                }
            }

            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }

            let animationId;
            const duration = 3500;
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                
                if (elapsed > duration) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    cancelAnimationFrame(animationId);
                    return;
                }

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                particles.forEach((particle, index) => {
                    particle.update();
                    particle.draw();

                    if (particle.y > canvas.height) {
                        particles[index] = new Particle();
                    }
                });

                animationId = requestAnimationFrame(animate);
            }

            animate();
        }

        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Prevent accidental close on fullscreen image click
        document.getElementById('fullscreenImg').addEventListener('click', (e) => {
            e.stopPropagation();
        });
    </script>
</body>
</html>